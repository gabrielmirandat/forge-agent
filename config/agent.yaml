agent:
  name: forge-agent
  version: 0.1.0
  
  workspace:
    base_path: ~/repos
    persistent: true
    cleanup_on_exit: false
  
  llm:
    provider: ollama
    base_url: http://localhost:11434
    model: qwen2.5-coder:7b
    temperature: 0.1
    max_tokens: 4096
    timeout: 300
  
  runtime:
    max_iterations: 50
    timeout_seconds: 3600
    enable_parallel_tools: false
    safety_checks: true
  
  # Tool configuration - SECURITY CRITICAL
  # 
  # Each tool has explicit boundaries and responsibilities:
  # - filesystem: Structured file I/O with path validation (NO execution)
  # - shell: Command execution with validation (ONLY when execution semantics required)
  # - system: Side-effect-free system introspection (NO execution, NO file I/O)
  # - git: Structured Git operations (NO arbitrary commands)
  # - github: GitHub API operations (NO file I/O, NO Git operations)
  #
  # See docs/tools/*.md for full contract documentation.
  tools:
    # FILESYSTEM TOOL
    # PRIMARY PURPOSE: Security boundaries and path validation for file operations
    # Simple CRUD operations: read, write, list, create, delete files and directories
    # Security: Path validation is MANDATORY - enforces allowed_paths and restricted_paths
    # For elaborate operations: Use shell commands (head, tail, grep, sed, awk, etc.) for text processing
    # Rule: Simple operations = filesystem tool, Elaborate operations = shell tool
    filesystem:
      enabled: true
      # Allowed paths: Explicitly allowed directories (subdirectories are also allowed)
      # Paths are resolved and normalized before validation
      # ~ is expanded to home directory automatically
      allowed_paths:
        - ~/repos
      # Restricted paths: System directories that should never be accessed
      # Note: allowed_paths take priority (e.g., ~/repos is allowed even if /home is restricted)
      restricted_paths:
        - /
        - /home
        - /etc
        - /usr
        - /var
        - /sys
        - /proc
    
    # GIT TOOL
    # Purpose: Structured Git repository operations
    # Contract: Create branches, commits, pushes, status, diffs
    # Forbidden: Arbitrary git commands, file I/O, execution semantics
    # Security: Structured API only, no arbitrary command execution
    # Overlap: Prefer git tool for Git operations, use shell only if structured API doesn't support operation
    git:
      enabled: true
      default_branch_prefix: agent/
      auto_commit: false
      commit_message_template: "Agent: {description}"
    
    # GITHUB TOOL
    # Purpose: Structured GitHub API operations
    # Contract: Create PRs, list PRs, comment on PRs, create repositories
    # Forbidden: Arbitrary API calls, file I/O, Git operations
    # Security: Authentication required (GITHUB_TOKEN), structured API only
    # Overlap: Use github for GitHub API, use git for local Git operations
    # GitHub CLI: For create_repository_with_cli, ensure 'gh' is installed and authenticated
    #   - Install: https://cli.github.com/
    #   - Authenticate: gh auth login OR set GITHUB_TOKEN environment variable
    github:
      enabled: true
      # Token should be set via environment variable GITHUB_TOKEN
      # For GitHub CLI operations, ensure 'gh' CLI is installed and authenticated
      base_url: https://api.github.com
      auto_create_pr: false
      pr_title_template: "Agent: {title}"
      pr_body_template: "Automated changes by forge-agent"
    
    # SYSTEM TOOL
    # Purpose: Read-only system introspection and information retrieval
    # Contract: Get OS info, runtime info, agent config summary
    # Forbidden: Any operations that modify system state
    # Security: No side effects, read-only operations only
    # Overlap:
    #   - vs shell: Prefer system for introspection, use shell only when you need to run a command
    #   - vs filesystem: System tool is for system-level info, filesystem is for file operations
    system:
      enabled: true
    
    # SHELL TOOL
    # Purpose: Command execution with explicit execution semantics
    # Contract: Execute commands, run programs, capture output
    # Forbidden: Information-only operations (use system/filesystem tools instead)
    # Security: Command validation is mandatory, only allowed_commands can be executed
    # Overlap: 
    #   - vs filesystem: Prefer filesystem for file I/O, use shell only when execution is required
    #   - vs system: Prefer system for introspection, use shell only when you need to run a command
    # Priority: Shell should be LAST resort - prefer structured tools (filesystem, system, git) when possible
    shell:
      enabled: true
      # Allowed commands: If empty or not configured, ALL commands are allowed (except restricted ones)
      # If you want to restrict to specific commands, list them here
      # By default, we allow all commands except those explicitly restricted below
      allowed_commands: []  # Empty list = allow all commands (except restricted)
      # Restricted commands: Commands that should NEVER be executed
      # These are blocked even if they appear in allowed_commands (restricted takes priority)
      restricted_commands:
        - rm
        - sudo
        - chmod
        - chown
        - mkfs
        - fdisk
        - dd
        - mount
        - umount
    
  
  # Logging
  logging:
    level: INFO
    format: json
    output_path: ./workspace/logs
  
  human_in_the_loop:
    enabled: false
